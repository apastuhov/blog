<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript instantiation trick | Aleksey Pastuhov</title>
    <meta name="description" content="Some people call it &quot;JS factory shortcut&quot;.">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=2">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=2">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=2">
  <link rel="manifest" href="/site.webmanifest?v=2">
  <link rel="mask-icon" href="/safari-pinned-tab.svg?v=2" color="#5bbad5">
  <link rel="shortcut icon" href="/favicon.ico?v=2">
  <meta name="apple-mobile-web-app-title" content="Aleksey Pastuhov">
  <meta name="application-name" content="Aleksey Pastuhov">
  <meta name="msapplication-TileColor" content="#223344">
  <meta name="theme-color" content="#ffffff">
  <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-100449796-1"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-100449796-1');</script>
  <meta name="pinterest-rich-pin" content="true">
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="Aleksey Pastuhov">
  <meta name="twitter:card" content="summary">
  <meta name="author" content="Aleksey Pastuhov">
  <style>@font-face {font-family: 'Constantia'; src: url('/fonts/Constantia.ttf'); }       @font-face {font-family: 'Franklin Gothic Medium'; src: url('/fonts/franklin-gothic-medium.ttf'); }</style>
    <meta property="og:image" content="https://apastuhov.com/android-chrome-512x512.png"><meta property="twitter:image" content="https://apastuhov.com/android-chrome-512x512.png"><meta property="og:image:width" content="512px"><meta property="og:image:height" content="512px"><meta property="og:url" content="https://apastuhov.com/post/js-factory-trick/"><meta name="keywords" content="aleksey pastuhov,javascript,trick,factory,audiocontext,webapi"><meta name="twitter:title" content="JavaScript instantiation trick"><meta property="og:title" content="JavaScript instantiation trick"><meta name="twitter:description" content="Some people call it &quot;JS factory shortcut&quot;."><meta property="og:description" content="Some people call it &quot;JS factory shortcut&quot;."><meta property="og:locale" content="en_US">
    <link rel="preload" href="/assets/css/styles.e437fc9f.css" as="style"><link rel="preload" href="/assets/js/app.e437fc9f.js" as="script"><link rel="preload" href="/assets/js/10.050ea8eb.js" as="script"><link rel="prefetch" href="/assets/css/2.styles.cdbda137.css"><link rel="prefetch" href="/assets/css/6.styles.f3934f64.css"><link rel="prefetch" href="/assets/js/1.2d26195f.js"><link rel="prefetch" href="/assets/js/2.cdbda137.js"><link rel="prefetch" href="/assets/js/3.c98fb745.js"><link rel="prefetch" href="/assets/js/4.87968ab8.js"><link rel="prefetch" href="/assets/js/5.08002aee.js"><link rel="prefetch" href="/assets/js/6.f3934f64.js"><link rel="prefetch" href="/assets/js/7.23db4ec0.js"><link rel="prefetch" href="/assets/js/8.73194ed2.js"><link rel="prefetch" href="/assets/js/9.34d88535.js">
    <link rel="stylesheet" href="/assets/css/2.styles.cdbda137.css"><link rel="stylesheet" href="/assets/css/6.styles.f3934f64.css"><link rel="stylesheet" href="/assets/css/styles.e437fc9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <div class="links left-links can-hide" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----> <div class="theme-switcher"><img title="Switch to light side" srcset="/images/switcher-to-dark.png 100w" sizes="50px" src="/images/switcher-to-dark.png" class="to-dark"> <img title="Switch to dark side" srcset="/images/switcher-to-light.png 100w" sizes="50px" src="/images/switcher-to-light.png" class="to-light"></div></div> <div class="links right-links should-display" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <a href="/" class="home-link router-link-active"><img alt="Aleksey Pastuhov" src="/logo.svg" class="logo logo-light"> <img alt="Aleksey Pastuhov" src="/logo-dark.svg" class="logo logo-dark"> <h1 class="site-name can-hide">Aleksey Pastuhov</h1></a> <div class="links right-links" style="max-width:nullpx;"><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Articles</a></div><div class="nav-item"><a href="/about/" class="nav-link">About me</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><div class="theme-switcher"><img title="Switch to light side" srcset="/images/switcher-to-dark.png 100w" sizes="50px" src="/images/switcher-to-dark.png" class="to-dark"> <img title="Switch to dark side" srcset="/images/switcher-to-light.png 100w" sizes="50px" src="/images/switcher-to-light.png" class="to-light"></div> <!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Articles</a></div><div class="nav-item"><a href="/about/" class="nav-link">About me</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>JavaScript instantiation trick</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/post/js-factory-trick/#example" class="sidebar-link">Example</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/post/js-factory-trick/#little-trick" class="sidebar-link">Little trick</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/post/js-factory-trick/#summary" class="sidebar-link">Summary</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="javascript-instantiation-trick"><a href="#javascript-instantiation-trick" aria-hidden="true" class="header-anchor">#</a> JavaScript instantiation trick</h1> <p>If you develop any JavaScript application - one time there will be a moment when you need to use a factory.</p> <blockquote><p>Formally a factory is a function or method that returns objects of a varying prototype or class.</p></blockquote> <h2 id="example"><a href="#example" aria-hidden="true" class="header-anchor">#</a> Example</h2> <p>Here is a simple example:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">makeContext</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>AudioContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>AudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>webkitAudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="little-trick"><a href="#little-trick" aria-hidden="true" class="header-anchor">#</a> Little trick</h2> <p>Okay, lets do some magic? I think you know how JS works with <code>||</code> operator:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> value <span class="token operator">=</span> oldValue <span class="token operator">||</span> newValue<span class="token punctuation">;</span>
</code></pre></div><p>If the <code>oldValue</code> is not truth(ex: does not exists) - use <code>newValue</code>. So we can use it instead of a factory, like inline condition.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>AudioContext <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitAudioContext<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>It helps when we do not know if first class actually exists. Also you can write as many classes as you want. ðŸ˜ƒ</p> <h2 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> Summary</h2> <p>I do not recommend you to work with <em>inline factory</em> because it is not so obvious as a good function with documentation. But it is not bad to know about such trick.</p> <p>Thanks for reading and good luck!</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner action"><!----> <a href="/post/dead-code-problem/" class="action-button">
          Dead code problem
          â†’
        </a></p></div> <div id="feedback-form" class="feedback-form"><p class="center">
    or
  </p> <p class="center">
    Write me a message
  </p> <form method="POST" action="https://formspree.io/aleksey.pastuhov@gmail.com"><input type="hidden" name="_subject" value="Blog feedback"> <input type="hidden" name="page" value="JavaScript instantiation trick"> <input type="hidden" name="_next" value="/"> <div class="field-wrapper"><input type="email" name="_replyto" id="email" placeholder="Your email, so I can write you back (optional)"> <textarea required="required" name="feedback" id="feedback" cols="30" rows="10" placeholder="Share your thoughts, I appreciate your feedback!"></textarea></div> <p class="center"><input type="text" name="_gotcha" style="display:none"> <button type="submit" class="action-button">Send</button></p></form></div>  <div class="footer-wrapper"><div class="personal-links"><h3>Contact me here</h3> <div class="links"><a rel="noopener noreferrer" target="_blank" href="https://twitter.com/PastuhovAleksey" title="Twitter" onclick="gtag('event', 'social-twitter')">Twitter</a> <a rel="noopener noreferrer" target="_blank" href="https://www.linkedin.com/in/PastuhovAleksey" title="Linkedin" onclick="gtag('event', 'social-linkedin')">Linkedin</a> <a rel="noopener noreferrer" target="_blank" href="https://github.com/apastuhov" title="Github" onclick="gtag('event', 'social-github')">GitHub</a> <a rel="noopener noreferrer" target="_blank" href="https://dev.to/apastuhov" title="Dev" onclick="gtag('event', 'social-dev')">DevTo</a></div></div> <div class="footer">
  Copyright Â© 2016-present <span style="white-space: nowrap;">Aleksey Pastuhov</span></div></div></div> <!----></div></div>
    <script src="/assets/js/10.050ea8eb.js" defer></script><script src="/assets/js/app.e437fc9f.js" defer></script>
  </body>
</html>
